<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Open in Facebook</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>
        // --- CONFIGURE THIS: extract your Page‑ID or Path from the URL ---
        // Option A: Use a query parameter, e.g. https://site.com/?id=12345
        const params = new URLSearchParams(location.search);
        const pageId = params.get('id') || 'YOUR_DEFAULT_PAGE_ID';

        // Option B: Derive from the pathname, e.g. https://site.com/12345
        // const pageId = location.pathname.replace(/^\/+|\/+$/g, '');

        // --- BUILD THE DEEP-LINKS ---
        const iosLink     = `fb://profile/${pageId}`;
        const androidLink = `intent://profile/${pageId}#Intent;scheme=fb;package=com.facebook.katana;end`;
        const webLink     = `https://www.facebook.com/profile.php?id=${pageId}`;

        function openFacebook() {
            const ua = navigator.userAgent.toLowerCase();
            let target = webLink;

            if (/iphone|ipad|ipod/.test(ua)) {
                target = iosLink;
            } else if (/android/.test(ua)) {
                target = androidLink;
            }

            const start = Date.now();
            // Try to navigate to the deep‑link
            window.location = target;

            // If after 600ms nothing happened (i.e. app not installed),
            // redirect to the normal web URL
            setTimeout(() => {
                if (Date.now() - start < 1000) {
                    window.location = webLink;
                }
            }, 600);
        }

        // Kick off on load
        window.addEventListener('load', openFacebook, false);
    </script>
</head>
<body>
<p>Opening Facebook…</p>
<p>If it doesn’t automatically open, <a id="manual" href="#">click here</a>.</p>
<script>
    // Update the manual link once we know the final web link
    document.getElementById('manual').href = webLink;
</script>
</body>
</html>
